<div class="comment row card" id="comment-{{ comment.id }}">
    <div class="column" style="gap: 0; align-items: center;">
        <a href="/comments/{{ comment.id }}/rate-up" class="vote up-arrow"></a>
        <span class="comment-rating">{{ comment.rating }}</span>
        <a href="/comments/{{ comment.id }}/rate-down" class="vote down-arrow"></a>
    </div>
    <div class="column" style="flex: 1;">
        <h6 class="short">
            <a href="/users/{{ comment.user_id }}">
                {{- comment.username }}</a>{%- if comment.parent_comment_username is defined -%},
            replying to
            <a href="#comment-{{ comment.parent_comment_id }}">
                {{- comment.parent_comment_username }}</a>
            {%- endif %}
        </h6>
        <p class="short" style="max-width: 100%; white-space: pre-line; word-wrap: break-word; margin: 1em 0;" id="comment-content-{{ comment.id }}">{{ comment.content }}</p>
        <span>
            <span class="short row" style="font-size: .8em;" id="comment-links-{{ comment.id }}">
                <a onclick="showReplyForm(
                    {{- cringe.id }},
                    {{- comment.id }},
                    {{- auth_user.id }},'{{ comment.username }}')">Reply</a>
                {%- if auth_user.id == comment.user_id -%}
                <a onclick="editReply()">Edit</a>
                <a href="/comments/{{ comment.id}}/delete">Delete</a>
                {%- endif %}
            </span>
        </span>
    </div>
</div>
{% if comment.replies|count > 0 %}
<div style="padding-left: 2.5rem; border-left: 2px solid var(--bg-light); border-bottom-left-radius: 4em;">
{% for reply in comment.replies %}
    {% with comment = reply %}
    {% include "/views/comments/_insert.html" %}
    {% endwith %}
{% endfor %}
</div>
{% endif %}
